# 校园实验室预约与管理系统

## 主要功能点：

### 1：用户的登录注册（管理员内置，注册可以选择老师或学生）

学生注册时需选择自己的导师、学生姓名、专业、年级

老师注册时需姓名和学院

### 2：管理员功能

实验室资源管理：实验室的增删改查、实验室设备的增删改查、实验室开放时间设置、查看故障报修情况

### 3：学生功能

查看自己的所有信息

预约实验室

1. 学生选择实验室和设备
2. 填写预约信息(时间、项目、设备需求)
3. 提交预约申请
4. 教师审核预约
5. 系统发送审核结果通知
6. 使用实验室并记录使用情况

查看自己的预约审核

对故障进行报修

### 4：教师功能

查看自己的所有信息

查看自己学生的预约申请

教师审核预约申请生成审核记录



## 所有实体：

1. **用户表**(user) - 存储所有系统用户信息(账号/密码/权限(0管理员1老师2学生))
2. **学生表**(student) - 存储学生特定信息
3. **教师表**(teacher) - 存储教师特定信息
4. **管理员表**(admin) - 存储管理员信息
5. **实验室表**(laboratory) - 实验室基本信息
6. **设备表**(equipment) - 实验设备信息
7. 实验室空闲情况表-记录实验室的各个时间段的空闲情况
8. **预约表**(reservation) - 预约记录
9. **使用记录表**(usage_record) - 实验室使用记录
10. **故障报修表**(maintenance) - 设备故障报修记录
11. **审核记录表**(approval) - 预约审核记录



### 1. **用户表（`user`）**

| 字段名   | 类型         | 说明                         |
| :------- | :----------- | :--------------------------- |
| user_id  | INT          | 主键，自增                   |
| username | VARCHAR(50)  | 用户名，唯一                 |
| password | VARCHAR(100) | 密码（加密存储）             |
| role     | TINYINT      | 权限：0-管理员 1-教师 2-学生 |

------

### 2. **学生表（`student`）**

| 字段名     | 类型        | 说明               |
| :--------- | :---------- | :----------------- |
| student_id | INT         | 主键，自增         |
| user_id    | INT         | 外键，关联 user    |
| teacher_id | INT         | 外键，关联 teacher |
| name       | VARCHAR(50) | 学生姓名           |
| major      | VARCHAR(50) | 专业               |
| grade      | VARCHAR(20) | 年级               |

------

### 3. **教师表（`teacher`）**

| 字段名     | 类型        | 说明            |
| :--------- | :---------- | :-------------- |
| teacher_id | INT         | 主键，自增      |
| user_id    | INT         | 外键，关联 user |
| name       | VARCHAR(50) | 教师姓名        |
| department | VARCHAR(50) | 所属部门        |

------

### 4. **管理员表（`admin`）**

| 字段名   | 类型        | 说明            |
| :------- | :---------- | :-------------- |
| admin_id | INT         | 主键，自增      |
| user_id  | INT         | 外键，关联 user |
| name     | VARCHAR(50) | 管理员姓名      |

------

### 5. **实验室表（`laboratory`）**

| 字段名     | 类型         | 说明                |
| :--------- | :----------- | :------------------ |
| lab_id     | INT          | 主键，自增          |
| lab_name   | VARCHAR(100) | 实验室名称          |
| location   | VARCHAR(100) | 位置                |
| capacity   | INT          | 可容纳人数          |
| open_time  | TIME         | 开放开始时间        |
| close_time | TIME         | 开放结束时间        |
| status     | TINYINT      | 状态：0-关闭 1-开放 |

------

### 6. **设备表（`equipment`）**

| 字段名         | 类型         | 说明                         |
| :------------- | :----------- | :--------------------------- |
| equipment_id   | INT          | 主键，自增                   |
| lab_id         | INT          | 外键，关联 laboratory        |
| equipment_name | VARCHAR(100) | 设备名称                     |
| model          | VARCHAR(50)  | 型号                         |
| status         | TINYINT      | 状态：0-故障 1-正常 2-使用中 |

------

### 7. **预约表（`reservation`）**

| 字段名         | 类型         | 说明                         |
| :------------- | :----------- | :--------------------------- |
| reservation_id | INT          | 主键，自增                   |
| student_id     | INT          | 外键，关联 student           |
| lab_id         | INT          | 外键，关联 laboratory        |
| project_name   | VARCHAR(100) | 项目名称                     |
| start_time     | DATETIME     | 预约开始时间                 |
| end_time       | DATETIME     | 预约结束时间                 |
| status         | TINYINT      | 状态：0-待审核 1-通过 2-拒绝 |

------

### 8. **使用记录表（`usage_record`）**

| 字段名            | 类型     | 说明                   |
| :---------------- | :------- | :--------------------- |
| record_id         | INT      | 主键，自增             |
| reservation_id    | INT      | 外键，关联 reservation |
| actual_start_time | DATETIME | 实际开始时间           |
| actual_end_time   | DATETIME | 实际结束时间           |
| notes             | TEXT     | 使用备注               |

------

### 9. **故障报修表（`maintenance`）**

| 字段名            | 类型     | 说明                             |
| :---------------- | :------- | :------------------------------- |
| maintenance_id    | INT      | 主键，自增                       |
| equipment_id      | INT      | 外键，关联 equipment             |
| reported_by       | INT      | 外键，关联 user                  |
| report_time       | DATETIME | 报修时间                         |
| issue_description | TEXT     | 问题描述                         |
| status            | TINYINT  | 状态：0-待处理 1-处理中 2-已修复 |

------

### 10. **审核记录表（`approval`）**

| 字段名         | 类型     | 说明                   |
| :------------- | :------- | :--------------------- |
| approval_id    | INT      | 主键，自增             |
| reservation_id | INT      | 外键，关联 reservation |
| teacher_id     | INT      | 外键，关联 teacher     |
| approval_time  | DATETIME | 审核时间               |
| result         | TINYINT  | 结果：1-通过 2-拒绝    |
| comment        | TEXT     | 审核意见               |

### 11. **实验室空闲情况表（`lab_availability`）**

| 字段名            | 类型    | 说明                                                         |
| :---------------- | :------ | :----------------------------------------------------------- |
| `availability_id` | INT     | 主键，自增                                                   |
| `lab_id`          | INT     | **外键**，关联 `laboratory` 表                               |
| `date`            | DATE    | 所属日期（用于快速定位某天的状态）                           |
| `start_time`      | TIME    | 时间段的开始时间                                             |
| `end_time`        | TIME    | 时间段的结束时间                                             |
| `status`          | TINYINT | **状态：0-不可用 1-空闲 2-已被预约 3-教学占用**              |
| `reservation_id`  | INT     | **可空外键**，关联 `reservation` 表。当状态为“已被预约”时，指向具体的预约记录；否则为NULL。 |

------

### 设计与使用说明：

1. **核心目的**：
   - 将实验室的开放时间划分为多个**标准时间段**（例如：08:00-09:00, 09:00-10:00 ...）。
   - 预先存储未来一段时间内（如一周或一个月）所有实验室的所有时间段状态。
   - 学生预约时，系统只需查询此表，快速找出状态为“空闲”的实验室和时间段，极大提升查询效率和简化逻辑。
2. **状态解释**：
   - **不可用**：实验室在该时间段不开放（如非工作时间、维护中）。
   - **空闲**：实验室在该时间段可用且未被预约。
   - **已被预约**：实验室在该时间段已被成功预约。
   - **教学占用**：实验室在该时间段有排课，优先级高于普通预约。
3. **工作流程**：
   - **初始化**：系统管理员或定时任务会根据`laboratory`表的`open_time`和`close_time`，生成未来一段时间所有实验室的“空闲”记录。非工作时间则生成“不可用”记录。
   - **预约时**：
     - 学生查询“空闲”状态的实验室。
     - 提交预约申请后，系统会立即将对应时间段的状态改为 **“已被预约”**，并关联`reservation_id`。这是一种“软锁定”，防止重复预约。
     - 如果教师**审核拒绝**，系统会将状态改回 **“空闲”**，并清空`reservation_id`。
   - **预约成功**：状态保持为“已被预约”。
   - **教学计划**：如果有课程系统，可以批量将特定时间段的状态设置为 **“教学占用”**。
4. **优势**：
   - **性能高**：避免了在预约时实时计算多个表（预约表、实验室表）的复杂关联查询。
   - **逻辑清晰**：实验室的可用性一目了然。
   - **扩展性强**：易于处理临时关闭、教学占用等复杂情况